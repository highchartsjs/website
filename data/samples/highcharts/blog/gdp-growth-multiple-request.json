{"js":"// Set up URL request\n\nvar urlCountry = 'https://cdn.jsdelivr.net/gh/highcharts/highcharts@22a6cc01/samples/data/worldbank-country.json';\nvar urlRegion = 'https://cdn.jsdelivr.net/gh/highcharts/highcharts@22a6cc01/samples/data/worldbank-region.json';\nvar urlIncome = 'https://cdn.jsdelivr.net/gh/highcharts/highcharts@22a6cc01/samples/data/worldbank-income.json';\nvar urlWorld = 'https://cdn.jsdelivr.net/gh/highcharts/highcharts@22a6cc01/samples/data/worldbank-indicator.json';\n\n\nvar date = [],\n    arrayCountry = [],\n    arrayRegion = [],\n    arrayIncome = [],\n    arrayWorld = [],\n    arrayStringCountry = [],\n    arrayStringRegion = [],\n    arrayStringIncome = [],\n    arrayStringWorld = [],\n    countryName,\n    regionName,\n    incomeName,\n    indicatorName;\n\n\nfetch(urlCountry).then(function (response) {\n    return response.json();\n}).then(function (result) {\n\n    result[1].forEach(function (data) {\n        countryName = data.country.value;\n        // fill the string data array\n        arrayStringCountry.push(data.value);\n    });\n    fetch(urlRegion).then(function (response) {\n        return response.json();\n    }).then(function (result) {\n        result[1].forEach(function (data) {\n            regionName = data.country.value;\n            arrayStringRegion.push(data.value);\n        });\n        fetch(urlIncome).then(function (response) {\n            return response.json();\n        }).then(function (result) {\n            result[1].forEach(function (data) {\n                incomeName = data.country.value;\n                arrayStringIncome.push(data.value);\n            });\n            fetch(urlWorld).then(function (response) {\n                return response.json();\n            }).then(function (result) {\n                result[1].forEach(function (data) {\n                    indicatorName = data.indicator.value;\n                    // fill the date array\n                    date.push(data.date);\n                    arrayStringWorld.push(data.value);\n                });\n\n                // querry send string that we need to convert into numbers or null\n                for (var i = 0;\n                    i < arrayStringWorld.length; i++) { // we use world lenght since the world serie is supposed to be  the longer (the one with no missing values)\n                    if (arrayStringCountry[i] !== null) {\n                        arrayCountry.push(parseFloat(\n                            arrayStringCountry[i]));\n                    } else {\n                        arrayCountry.push(null);\n                    }\n\n                    if (arrayStringRegion[i] !== null) {\n                        arrayRegion.push(parseFloat(\n                            arrayStringRegion[i]));\n                    } else {\n                        arrayRegion.push(null);\n                    }\n\n                    if (arrayStringIncome[i] !== null) {\n                        arrayIncome.push(parseFloat(\n                            arrayStringIncome[i]));\n                    } else {\n                        arrayIncome.push(null);\n                    }\n\n                    if (arrayStringWorld[i] !== null) {\n                        arrayWorld.push(parseFloat(\n                            arrayStringWorld[i]));\n                    } else {\n                        arrayWorld.push(null);\n                    }\n                }\n\n                // Create the Chart\n                var chart = new Highcharts.Chart({\n\n                    chart: {\n                        type: 'spline',\n                        renderTo: 'container'\n                    },\n                    colors: ['#6e9fc5', '#ffdf51', '#a6ca6d', '#ad46d6', '#f26a2e', '#00adef', '#f4bb90'],\n                    title: {\n                        text: indicatorName,\n                        style: {\n                            fontSize: '14px'\n                        }\n                    },\n                    type: 'spline',\n                    tooltip: {\n                        valueDecimals: 2,\n                        pointFormat: '<span style=\"color:{point.color}\">\\u25CF</span> {series.name}: <b>{point.y}%</b><br/>'\n                    },\n                    plotOptions: {\n                        series: {\n                            marker: {\n                                enabled: false\n                            }\n                        }\n                    },\n                    subtitle: {\n                        text: 'Source: World Bank Data'\n                    },\n                    xAxis: {\n                        categories: date.reverse()\n                    }, // .reverse() to have the min year on the left\n                    series: [{\n                        name: countryName,\n                        data: arrayCountry.reverse()\n                    }, {\n                        name: regionName,\n                        data: arrayRegion.reverse()\n                    }, {\n                        name: incomeName,\n                        data: arrayIncome.reverse()\n                    }, {\n                        name: 'World',\n                        data: arrayWorld.reverse()\n                    }]\n                }); // end highcharts\n            }).catch(function (error) {\n                console.log('there was an error 1!', error);\n            });\n        }).catch(function (error) {\n            console.log('there was an error 2!', error);\n        });\n    }).catch(function (error) {\n        console.log('there was an error 3!', error);\n    });\n}).catch(function (error) {\n    console.log('there was an error 4!', error);\n});\n","css":"","html":"\n<div id=\"container\" style=\"min-width: 310px; height: 400px; margin: 0 auto\"></div>","npm":"// 安装\nnpm install highcharts@11.0.0 --save\n\n// import 模块 \nimport Highcharts    from 'highcharts';\nimport Exporting     from 'highcharts/modules/exporting';\nimport ExportCsv     from 'https://highcharts.github.io/export-csv/export-csv.js';\nimport Accessibility from 'highcharts/modules/accessibility';\n\n// 初始化模块\nExporting(Highcharts);\nExportCsv(Highcharts);\nAccessibility(Highcharts);\n","scripts":["https://code.highcharts.com/11.0.0/highcharts.js","https://code.highcharts.com/11.0.0/modules/exporting.js","https://highcharts.github.io/export-csv/export-csv.js","https://code.highcharts.com/11.0.0/modules/accessibility.js"]}