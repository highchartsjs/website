{"js":"// It builds the options for the fibonacc retracements annotation\n// which starts from (x1, y1) and stops on (x2, y2)\nfunction fibonacciRetracements(x1, y1, x2, y2) {\n    var levels = [0, 0.236, 0.382, 0.5, 0.618, 0.786, 1];\n    var colors = [\n        'rgba(130, 170, 255, 0.4)',\n        'rgba(139, 191, 216, 0.4)',\n        'rgba(150, 216, 192, 0.4)',\n        'rgba(156, 229, 161, 0.4)',\n        'rgba(162, 241, 130, 0.4)',\n        'rgba(169, 255, 101, 0.4)'\n    ];\n\n    var point = function (x, y) {\n        return {\n            x: x,\n            y: y,\n            xAxis: 0,\n            yAxis: 0\n        };\n    };\n\n    var diff = y2 - y1;\n\n    var lines = [];\n    var backgrounds = [];\n    var labels = [];\n\n    // building options for the annotation\n    Highcharts.each(levels, function (level, i) {\n        var retracement = y2 - diff * level;\n        var p1 = point(x1, retracement);\n        var p2 = point(x2, retracement);\n\n        // defining horizontal lines\n        lines.push({\n            type: 'path',\n            points: [p1, p2],\n            stroke: 'grey'\n        });\n\n        // defining labels for horizontal lines\n        labels.push({\n            point: p1,\n            text: level.toString()\n        });\n\n        if (i > 0) {\n            // defining colored backgrounds\n            backgrounds.push({\n                type: 'path',\n                points: [\n                    lines[i - 1].points[0],\n                    lines[i - 1].points[1],\n                    lines[i].points[1],\n                    lines[i].points[0]\n                ],\n                strokeWidth: 0,\n                fill: colors[i - 1]\n            });\n        }\n    });\n\n    // defining the trend line\n    var trendLine = [{\n        type: 'path',\n        dashStyle: 'Dash',\n        points: [point(x1, y1), point(x2, y2)],\n        stroke: 'black'\n    }];\n\n\n    // Putting pieces together into an annotation\n    return {\n        labels: labels,\n        shapes: lines.concat(backgrounds, trendLine),\n        zIndex: 2,\n        labelOptions: {\n            allowOverlap: true,\n            align: 'right',\n            y: 0,\n            backgroundColor: 'none',\n            verticalAlign: 'middle',\n            shape: 'rect',\n            borderWidth: 0,\n            style: {\n                color: 'grey'\n            }\n        }\n    };\n}\n\nHighcharts.getJSON('https://www.highcharts.com/samples/data/aapl-ohlc.json', function (data) {\n    // create the chart\n    Highcharts.stockChart('container', {\n\n        rangeSelector: {\n            selected: 4\n        },\n\n        title: {\n            text: 'Highcharts Stock Annotations'\n        },\n\n        subtitle: {\n            text: 'Fibonacci Retracements'\n        },\n\n        yAxis: {\n            labels: {\n                enabled: false\n            }\n        },\n\n        annotations: [\n            fibonacciRetracements(\n                Date.UTC(2016, 10, 14),\n                105,\n                Date.UTC(2017, 8, 4), 170\n            )\n        ],\n\n        series: [{\n            type: 'candlestick',\n            name: 'AAPL Stock Price',\n            data: data,\n            dataGrouping: {\n                units: [[\n                    'week', // unit name\n                    [1] // allowed multiples\n                ], [\n                    'month',\n                    [1, 2, 3, 4, 6]\n                ]]\n            }\n        }]\n    });\n});\n","css":"#container {\n    height: 400px;\n    min-width: 600px;\n}\n","html":"<div id=\"container\"></div>\n\n\n","npm":"// 安装\nnpm install highcharts@11.0.1 --save\n\n// import 模块 \nimport Highcharts  from 'highcharts/highstock';\nimport Data        from 'highcharts/modules/data';\nimport Exporting   from 'highcharts/modules/exporting';\nimport Annotations from 'highcharts/modules/annotations';\n\n// 初始化模块\nData(Highcharts);\nExporting(Highcharts);\nAnnotations(Highcharts);\n","scripts":["https://code.highcharts.com/stock/11.0.1/highstock.js","https://code.highcharts.com/stock/11.0.1/modules/data.js","https://code.highcharts.com/stock/11.0.1/modules/exporting.js","https://code.highcharts.com/11.0.1/modules/annotations.js"]}