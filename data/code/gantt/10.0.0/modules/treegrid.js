/*
 Highcharts Gantt JS v10.0.0 (2022-03-16)

 Tree Grid

 (c) 2016-2021 Jon Arild Nygard

 License: www.highcharts.com/license
*/
(function(h){"object"===typeof module&&module.exports?(h["default"]=h,module.exports=h):"function"===typeof define&&define.amd?define("highcharts/modules/treegrid",["highcharts"],function(B){h(B);h.Highcharts=B;return h}):h("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(h){function B(h,r,z,q){h.hasOwnProperty(r)||(h[r]=q.apply(null,z))}h=h?h._modules:{};B(h,"Core/Axis/BrokenAxis.js",[h["Extensions/Stacking.js"],h["Core/Utilities.js"]],function(h,r){var z=r.addEvent,q=r.find,v=r.fireEvent,
n=r.isArray,l=r.isNumber,x=r.pick,C;(function(a){function g(){"undefined"!==typeof this.brokenAxis&&this.brokenAxis.setBreaks(this.options.breaks,!1)}function p(){this.brokenAxis&&this.brokenAxis.hasBreaks&&(this.options.ordinal=!1)}function r(){var a=this.brokenAxis;if(a&&a.hasBreaks){for(var b=this.tickPositions,e=this.tickPositions.info,G=[],m=0;m<b.length;m++)a.isInAnyBreak(b[m])||G.push(b[m]);this.tickPositions=G;this.tickPositions.info=e}}function C(){this.brokenAxis||(this.brokenAxis=new y(this))}
function f(){var a=this.options.connectNulls,b=this.points,e=this.xAxis,G=this.yAxis;if(this.isDirty)for(var m=b.length;m--;){var H=b[m],c=!(null===H.y&&!1===a)&&(e&&e.brokenAxis&&e.brokenAxis.isInAnyBreak(H.x,!0)||G&&G.brokenAxis&&G.brokenAxis.isInAnyBreak(H.y,!0));H.visible=c?!1:!1!==H.options.visible}}function d(){this.drawBreaks(this.xAxis,["x"]);this.drawBreaks(this.yAxis,x(this.pointArrayMap,["y"]))}function e(a,b){var e=this,I=e.points,m,F,c,k;if(a&&a.brokenAxis&&a.brokenAxis.hasBreaks){var d=
a.brokenAxis;b.forEach(function(b){m=d&&d.breakArray||[];F=a.isXAxis?a.min:x(e.options.threshold,a.min);I.forEach(function(e){k=x(e["stack"+b.toUpperCase()],e[b]);m.forEach(function(b){if(l(F)&&l(k)){c=!1;if(F<b.from&&k>b.to||F>b.from&&k<b.from)c="pointBreak";else if(F<b.from&&k>b.from&&k<b.to||F>b.from&&k>b.to&&k<b.from)c="pointInBreak";c&&v(a,c,{point:e,brk:b})}})})})}}function c(){var b=this.currentDataGrouping,a=b&&b.gapSize;b=this.points.slice();var e=this.yAxis,c=this.options.gapSize,m=b.length-
1,d;if(c&&0<m)for("value"!==this.options.gapUnit&&(c*=this.basePointRange),a&&a>c&&a>=this.basePointRange&&(c=a),d=void 0;m--;)d&&!1!==d.visible||(d=b[m+1]),a=b[m],!1!==d.visible&&!1!==a.visible&&(d.x-a.x>c&&(d=(a.x+d.x)/2,b.splice(m+1,0,{isNull:!0,x:d}),e.stacking&&this.options.stacking&&(d=e.stacking.stacks[this.stackKey][d]=new h(e,e.options.stackLabels,!1,d,this.stack),d.total=0)),d=a);return this.getGraphPath(b)}var b=[];a.compose=function(a,I){-1===b.indexOf(a)&&(b.push(a),a.keepProps.push("brokenAxis"),
z(a,"init",C),z(a,"afterInit",g),z(a,"afterSetTickPositions",r),z(a,"afterSetOptions",p));if(-1===b.indexOf(I)){b.push(I);var F=I.prototype;F.drawBreaks=e;F.gappedPath=c;z(I,"afterGeneratePoints",f);z(I,"afterRender",d)}return a};var y=function(){function a(a){this.hasBreaks=!1;this.axis=a}a.isInBreak=function(a,b){var e=a.repeat||Infinity,m=a.from,d=a.to-a.from;b=b>=m?(b-m)%e:e-(m-b)%e;return a.inclusive?b<=d:b<d&&0!==b};a.lin2Val=function(b){var e=this.brokenAxis;e=e&&e.breakArray;if(!e||!l(b))return b;
var d;for(d=0;d<e.length;d++){var m=e[d];if(m.from>=b)break;else m.to<b?b+=m.len:a.isInBreak(m,b)&&(b+=m.len)}return b};a.val2Lin=function(b){var e=this.brokenAxis;e=e&&e.breakArray;if(!e||!l(b))return b;var d=b,m;for(m=0;m<e.length;m++){var c=e[m];if(c.to<=b)d-=c.len;else if(c.from>=b)break;else if(a.isInBreak(c,b)){d-=b-c.from;break}}return d};a.prototype.findBreakAt=function(a,b){return q(b,function(b){return b.from<a&&a<b.to})};a.prototype.isInAnyBreak=function(b,e){var d=this.axis,m=d.options.breaks||
[],c=m.length,J;if(c&&l(b)){for(;c--;)if(a.isInBreak(m[c],b)){var k=!0;J||(J=x(m[c].showPoints,!d.isXAxis))}var w=k&&e?k&&!J:k}return w};a.prototype.setBreaks=function(b,e){var d=this,c=d.axis,g=n(b)&&!!b.length;c.isDirty=d.hasBreaks!==g;d.hasBreaks=g;c.options.breaks=c.userOptions.breaks=b;c.forceRedraw=!0;c.series.forEach(function(b){b.isDirty=!0});g||c.val2lin!==a.val2Lin||(delete c.val2lin,delete c.lin2val);g&&(c.userOptions.ordinal=!1,c.lin2val=a.lin2Val,c.val2lin=a.val2Lin,c.setExtremes=function(b,
a,e,E,g){if(d.hasBreaks){for(var k=this.options.breaks||[],w;w=d.findBreakAt(b,k);)b=w.to;for(;w=d.findBreakAt(a,k);)a=w.from;a<b&&(a=b)}c.constructor.prototype.setExtremes.call(this,b,a,e,E,g)},c.setAxisTranslation=function(){c.constructor.prototype.setAxisTranslation.call(this);d.unitLength=void 0;if(d.hasBreaks){var b=c.options.breaks||[],e=[],w=[],g=x(c.pointRangePadding,0),m=0,A,f=c.userMin||c.min,y=c.userMax||c.max,p;b.forEach(function(b){A=b.repeat||Infinity;l(f)&&l(y)&&(a.isInBreak(b,f)&&
(f+=b.to%A-f%A),a.isInBreak(b,y)&&(y-=y%A-b.from%A))});b.forEach(function(b){u=b.from;A=b.repeat||Infinity;if(l(f)&&l(y)){for(;u-A>f;)u-=A;for(;u<f;)u+=A;for(p=u;p<y;p+=A)e.push({value:p,move:"in"}),e.push({value:p+b.to-b.from,move:"out",size:b.breakSize})}});e.sort(function(b,u){return b.value===u.value?("in"===b.move?0:1)-("in"===u.move?0:1):b.value-u.value});var t=0;var u=f;e.forEach(function(b){t+="in"===b.move?1:-1;1===t&&"in"===b.move&&(u=b.value);0===t&&l(u)&&(w.push({from:u,to:b.value,len:b.value-
u-(b.size||0)}),m+=b.value-u-(b.size||0))});d.breakArray=w;l(f)&&l(y)&&l(c.min)&&(d.unitLength=y-f-m+g,v(c,"afterBreaks"),c.staticScale?c.transA=c.staticScale:d.unitLength&&(c.transA*=(y-c.min+g)/d.unitLength),g&&(c.minPixelPadding=c.transA*(c.minPointOffset||0)),c.min=f,c.max=y)}});x(e,!0)&&c.chart.redraw()};return a}();a.Additions=y})(C||(C={}));return C});B(h,"Core/Axis/GridAxis.js",[h["Core/Axis/Axis.js"],h["Core/Axis/AxisDefaults.js"],h["Core/Globals.js"],h["Core/Utilities.js"]],function(h,r,
z,q){var v=z.dateFormats,n=q.addEvent,l=q.defined,x=q.erase,C=q.find,a=q.isArray,g=q.isNumber,p=q.merge,D=q.pick,K=q.timeUnits,f=q.wrap,d;(function(e){function c(b,u){var a={width:0,height:0};u.forEach(function(u){u=b[u];if(q.isObject(u,!0)){var t=q.isObject(u.label,!0)?u.label:{};u=t.getBBox?t.getBBox().height:0;t.textStr&&!g(t.textPxLength)&&(t.textPxLength=t.getBBox().width);var c=g(t.textPxLength)?Math.round(t.textPxLength):0;t.textStr&&(c=Math.round(t.getBBox().width));a.height=Math.max(u,a.height);
a.width=Math.max(c,a.width)}});"treegrid"===this.options.type&&this.treeGrid&&this.treeGrid.mapOfPosToGridNode&&(a.width+=this.options.labels.indentation*((this.treeGrid.mapOfPosToGridNode[-1].height||0)-1));return a}function b(){var b=this.grid;(b&&b.columns||[]).forEach(function(b){b.getOffset()})}function d(b){if(!0===(this.options.grid||{}).enabled){var u=this.axisTitle,a=this.height,t=this.horiz,c=this.left,d=this.offset,k=this.opposite,g=this.options,f=this.top,w=this.width,m=this.tickSize(),
y=u&&u.getBBox().width,E=g.title.x,l=g.title.y,A=D(g.title.margin,t?5:10);u=this.chart.renderer.fontMetrics(g.title.style.fontSize,u).f;m=(t?f+a:c)+(t?1:-1)*(k?-1:1)*(m?m[0]/2:0)+(this.side===e.Side.bottom?u:0);b.titlePosition.x=t?c-(y||0)/2-A+E:m+(k?w:0)+d+E;b.titlePosition.y=t?m-(k?a:0)+(k?u:-u)/2+d+l:f-A+l}}function F(){var b=this.chart,a=this.options.grid;a=void 0===a?{}:a;var c=this.userOptions;if(a.enabled){var e=this.options;e.labels.align=D(e.labels.align,"center");this.categories||(e.showLastLabel=
!1);this.labelRotation=0;e.labels.rotation=0}if(a.columns){e=this.grid.columns=[];for(var d=this.grid.columnIndex=0;++d<a.columns.length;){var k=p(c,a.columns[a.columns.length-d-1],{linkedTo:0,type:"category",scrollbar:{enabled:!1}});delete k.grid.columns;k=new h(this.chart,k);k.grid.isColumn=!0;k.grid.columnIndex=d;x(b.axes,k);x(b[this.coll],k);e.push(k)}}}function I(){var b=this.grid,a=this.options;if(!0===(a.grid||{}).enabled){var c=this.min||0,d=this.max||0;this.maxLabelDimensions=this.getMaxLabelDimensions(this.ticks,
this.tickPositions);this.rightWall&&this.rightWall.destroy();if(this.grid&&this.grid.isOuterAxis()&&this.axisLine){var k=a.lineWidth;if(k){k=this.getLinePath(k);var g=k[0],f=k[1],m=((this.tickSize("tick")||[1])[0]-1)*(this.side===e.Side.top||this.side===e.Side.left?-1:1);"M"===g[0]&&"L"===f[0]&&(this.horiz?(g[2]+=m,f[2]+=m):(g[1]+=m,f[1]+=m));!this.horiz&&this.chart.marginRight&&(g=[g,["L",this.left,g[2]||0]],m=["L",this.chart.chartWidth-this.chart.marginRight,this.toPixels(d+this.tickmarkOffset)],
f=[["M",f[1]||0,this.toPixels(d+this.tickmarkOffset)],m],this.grid.upperBorder||0===c%1||(this.grid.upperBorder=this.grid.renderBorder(g)),this.grid.upperBorder&&(this.grid.upperBorder.attr({stroke:a.lineColor,"stroke-width":a.lineWidth}),this.grid.upperBorder.animate({d:g})),this.grid.lowerBorder||0===d%1||(this.grid.lowerBorder=this.grid.renderBorder(f)),this.grid.lowerBorder&&(this.grid.lowerBorder.attr({stroke:a.lineColor,"stroke-width":a.lineWidth}),this.grid.lowerBorder.animate({d:f})));this.grid.axisLineExtra?
(this.grid.axisLineExtra.attr({stroke:a.lineColor,"stroke-width":a.lineWidth}),this.grid.axisLineExtra.animate({d:k})):this.grid.axisLineExtra=this.grid.renderBorder(k);this.axisLine[this.showAxis?"show":"hide"](!0)}}(b&&b.columns||[]).forEach(function(b){b.render()});if(!this.horiz&&this.chart.hasRendered&&(this.scrollbar||this.linkedParent&&this.linkedParent.scrollbar)){b=this.tickmarkOffset;a=this.tickPositions[this.tickPositions.length-1];k=this.tickPositions[0];for(g=f=void 0;(f=this.hiddenLabels.pop())&&
f.element;)f.show();for(;(g=this.hiddenMarks.pop())&&g.element;)g.show();(f=this.ticks[k].label)&&(c-k>b?this.hiddenLabels.push(f.hide()):f.show());(f=this.ticks[a].label)&&(a-d>b?this.hiddenLabels.push(f.hide()):f.show());(c=this.ticks[a].mark)&&a-d<b&&0<a-d&&this.ticks[a].isLast&&this.hiddenMarks.push(c.hide())}}}function v(){var b=this.tickPositions&&this.tickPositions.info,a=this.options,c=this.userOptions.labels||{};(a.grid||{}).enabled&&(this.horiz?(this.series.forEach(function(b){b.options.pointRange=
0}),b&&a.dateTimeLabelFormats&&a.labels&&!l(c.align)&&(!1===a.dateTimeLabelFormats[b.unitName].range||1<b.count)&&(a.labels.align="left",l(c.x)||(a.labels.x=3))):"treegrid"!==this.options.type&&this.grid&&this.grid.columns&&(this.minPointOffset=this.tickInterval))}function G(b){var a=this.options;b=b.userOptions;var c=a&&q.isObject(a.grid,!0)?a.grid:{};if(!0===c.enabled){var t=p(!0,{className:"highcharts-grid-axis "+(b.className||""),dateTimeLabelFormats:{hour:{list:["%H:%M","%H"]},day:{list:["%A, %e. %B",
"%a, %e. %b","%E"]},week:{list:["Week %W","W%W"]},month:{list:["%B","%b","%o"]}},grid:{borderWidth:1},labels:{padding:2,style:{fontSize:"13px"}},margin:0,title:{text:null,reserveSpace:!1,rotation:0},units:[["millisecond",[1,10,100]],["second",[1,10]],["minute",[1,5,15]],["hour",[1,6]],["day",[1]],["week",[1]],["month",[1]],["year",null]]},b);"xAxis"===this.coll&&(l(b.linkedTo)&&!l(b.tickPixelInterval)&&(t.tickPixelInterval=350),l(b.tickPixelInterval)||!l(b.linkedTo)||l(b.tickPositioner)||l(b.tickInterval)||
(t.tickPositioner=function(b,a){var c=this.linkedParent&&this.linkedParent.tickPositions&&this.linkedParent.tickPositions.info;if(c){for(var e=t.units||[],d=void 0,u=void 0,k=void 0,f=0;f<e.length;f++)if(e[f][0]===c.unitName){d=f;break}e[d+1]?(k=e[d+1][0],u=(e[d+1][1]||[1])[0]):"year"===c.unitName&&(k="year",u=10*c.count);c=K[k];this.tickInterval=c*u;return this.getTimeTicks({unitRange:c,count:u,unitName:k},b,a,this.options.startOfWeek)}}));p(!0,this.options,t);this.horiz&&(a.minPadding=D(b.minPadding,
0),a.maxPadding=D(b.maxPadding,0));g(a.grid.borderWidth)&&(a.tickWidth=a.lineWidth=c.borderWidth)}}function m(b){b=(b=b.userOptions)&&b.grid||{};var a=b.columns;b.enabled&&a&&p(!0,this.options,a[a.length-1])}function H(){(this.grid.columns||[]).forEach(function(b){b.setScale()})}function J(b){var c=r.defaultLeftAxisOptions,e=this.horiz,d=this.maxLabelDimensions,t=this.options.grid;t=void 0===t?{}:t;t.enabled&&d&&(c=2*Math.abs(c.labels.x),e=e?t.cellHeight||c+d.height:c+d.width,a(b.tickSize)?b.tickSize[0]=
e:b.tickSize=[e,0])}function k(){this.axes.forEach(function(b){(b.grid&&b.grid.columns||[]).forEach(function(b){b.setAxisSize();b.setAxisTranslation()})})}function w(b){var a=this.grid;(a.columns||[]).forEach(function(a){a.destroy(b.keepEvents)});a.columns=void 0}function E(b){b=b.userOptions||{};var a=b.grid||{};a.enabled&&l(a.borderColor)&&(b.tickColor=b.lineColor=a.borderColor);this.grid||(this.grid=new L(this));this.hiddenLabels=[];this.hiddenMarks=[]}function M(b){var a=this.label,c=this.axis,
d=c.reversed,k=c.chart,t=c.options.grid||{},f=c.options.labels,m=f.align,w=e.Side[c.side],y=b.tickmarkOffset,E=c.tickPositions,l=this.pos-y;E=g(E[b.index+1])?E[b.index+1]-y:(c.max||0)+y;var A=c.tickSize("tick");y=A?A[0]:0;A=A?A[1]/2:0;if(!0===t.enabled){if("top"===w){t=c.top+c.offset;var p=t-y}else"bottom"===w?(p=k.chartHeight-c.bottom+c.offset,t=p+y):(t=c.top+c.len-(c.translate(d?E:l)||0),p=c.top+c.len-(c.translate(d?l:E)||0));"right"===w?(w=k.chartWidth-c.right+c.offset,d=w+y):"left"===w?(d=c.left+
c.offset,w=d-y):(w=Math.round(c.left+(c.translate(d?E:l)||0))-A,d=Math.min(Math.round(c.left+(c.translate(d?l:E)||0))-A,c.left+c.len));this.slotWidth=d-w;b.pos.x="left"===m?w:"right"===m?d:w+(d-w)/2;b.pos.y=p+(t-p)/2;k=k.renderer.fontMetrics(f.style.fontSize,a&&a.element);a=a?a.getBBox().height:0;f.useHTML?b.pos.y+=k.b+-(a/2):(a=Math.round(a/k.h),b.pos.y+=(k.b-(k.h-k.f))/2+-((a-1)*k.h/2));b.pos.x+=c.horiz&&f.x||0}}function A(b){var a=b.axis,c=b.value;if(a.options.grid&&a.options.grid.enabled){var d=
a.tickPositions,e=(a.linkedParent||a).series[0],k=c===d[0];d=c===d[d.length-1];var t=e&&C(e.options.data,function(b){return b[a.isXAxis?"x":"y"]===c}),f=void 0;t&&e.is("gantt")&&(f=p(t),z.seriesTypes.gantt.prototype.pointClass.setGanttPointAliases(f));b.isFirst=k;b.isLast=d;b.point=f}}function N(){var b=this.options,a=this.categories,c=this.tickPositions,d=c[0],e=c[c.length-1],k=this.linkedParent&&this.linkedParent.min||this.min,f=this.linkedParent&&this.linkedParent.max||this.max,g=this.tickInterval;
!0!==(b.grid||{}).enabled||a||!this.horiz&&!this.isLinked||(d<k&&d+g>k&&!b.startOnTick&&(c[0]=k),e>f&&e-g<f&&!b.endOnTick&&(c[c.length-1]=f))}function O(b){var a=this.options.grid;return!0===(void 0===a?{}:a).enabled&&this.categories?this.tickInterval:b.apply(this,Array.prototype.slice.call(arguments,1))}(function(b){b[b.top=0]="top";b[b.right=1]="right";b[b.bottom=2]="bottom";b[b.left=3]="left"})(e.Side||(e.Side={}));e.compose=function(a,e,g){-1===a.keepProps.indexOf("grid")&&(a.keepProps.push("grid"),
a.prototype.getMaxLabelDimensions=c,f(a.prototype,"unsquish",O),n(a,"init",E),n(a,"afterGetOffset",b),n(a,"afterGetTitlePosition",d),n(a,"afterInit",F),n(a,"afterRender",I),n(a,"afterSetAxisTranslation",v),n(a,"afterSetOptions",G),n(a,"afterSetOptions",m),n(a,"afterSetScale",H),n(a,"afterTickSize",J),n(a,"trimTicks",N),n(a,"destroy",w));n(e,"afterSetChartSize",k);n(g,"afterGetLabelPosition",M);n(g,"labelFormat",A);return a};var L=function(){function b(b){this.axis=b}b.prototype.isOuterAxis=function(){var b=
this.axis,a=b.grid.columnIndex,c=b.linkedParent&&b.linkedParent.grid.columns||b.grid.columns,d=a?b.linkedParent:b,e=-1,k=0;b.chart[b.coll].forEach(function(a,c){a.side!==b.side||a.options.isInternal||(k=c,a===d&&(e=c))});return k===e&&(g(a)?c.length===a:!0)};b.prototype.renderBorder=function(b){var a=this.axis,c=a.chart.renderer,d=a.options;b=c.path(b).addClass("highcharts-axis-line").add(a.axisBorder);c.styledMode||b.attr({stroke:d.lineColor,"stroke-width":d.lineWidth,zIndex:7});return b};return b}();
e.Additions=L})(d||(d={}));v.E=function(a){return this.dateFormat("%a",a,!0).charAt(0)};v.W=function(a){a=new this.Date(a);var c=(this.get("Day",a)+6)%7,b=new this.Date(a.valueOf());this.set("Date",b,this.get("Date",a)-c+3);c=new this.Date(this.get("FullYear",b),0,1);4!==this.get("Day",c)&&(this.set("Month",a,0),this.set("Date",a,1+(11-this.get("Day",c))%7));return(1+Math.floor((b.valueOf()-c.valueOf())/6048E5)).toString()};"";return d});B(h,"Gantt/Tree.js",[h["Core/Utilities.js"]],function(h){var r=
h.extend,z=h.isNumber,q=h.pick,v=function(l,h){var n=l.reduce(function(a,g){var l=q(g.parent,"");"undefined"===typeof a[l]&&(a[l]=[]);a[l].push(g);return a},{});Object.keys(n).forEach(function(a,g){var l=n[a];""!==a&&-1===h.indexOf(a)&&(l.forEach(function(a){g[""].push(a)}),delete g[a])});return n},n=function(l,h,v,a,g,p){var D=0,x=0,f=p&&p.after,d=p&&p.before;h={data:a,depth:v-1,id:l,level:v,parent:h};var e,c;"function"===typeof d&&d(h,p);d=(g[l]||[]).map(function(b){var a=n(b.id,l,v+1,b,g,p),d=
b.start;b=!0===b.milestone?d:b.end;e=!z(e)||d<e?d:e;c=!z(c)||b>c?b:c;D=D+1+a.descendants;x=Math.max(a.height+1,x);return a});a&&(a.start=q(a.start,e),a.end=q(a.end,c));r(h,{children:d,descendants:D,height:x});"function"===typeof f&&f(h,p);return h};return{getListOfParents:v,getNode:n,getTree:function(l,h){var r=l.map(function(a){return a.id});l=v(l,r);return n("",null,1,null,l,h)}}});B(h,"Core/Axis/TreeGridTick.js",[h["Core/Utilities.js"]],function(h){var r=h.addEvent,z=h.isObject,q=h.isNumber,v=
h.pick,n=h.wrap,l;(function(h){function l(){this.treeGrid||(this.treeGrid=new x(this))}function a(a,d){a=a.treeGrid;var e=!a.labelIcon,c=d.renderer,b=d.xy,f=d.options,g=f.width||0,h=f.height||0,l=b.x-g/2-(f.padding||0);b=b.y-h/2;var p=d.collapsed?90:180,m=d.show&&q(b),n=a.labelIcon;n||(a.labelIcon=n=c.path(c.symbols[f.type](f.x||0,f.y||0,g,h)).addClass("highcharts-label-icon").add(d.group));n.attr({y:m?0:-9999});c.styledMode||n.attr({cursor:"pointer",fill:v(d.color,"#666666"),"stroke-width":1,stroke:f.lineColor,
strokeWidth:f.lineWidth||0});n[e?"attr":"animate"]({translateX:l,translateY:b,rotation:p})}function g(a,d,e,c,b,g,h,l,p){var f=v(this.options&&this.options.labels,g);g=this.pos;var m=this.axis,n="treegrid"===m.options.type;a=a.apply(this,[d,e,c,b,f,h,l,p]);n&&(d=f&&z(f.symbol,!0)?f.symbol:{},f=f&&q(f.indentation)?f.indentation:0,g=(g=(m=m.treeGrid.mapOfPosToGridNode)&&m[g])&&g.depth||1,a.x+=(d.width||0)+2*(d.padding||0)+(g-1)*f);return a}function p(f){var d=this,e=d.pos,c=d.axis,b=d.label,g=c.treeGrid.mapOfPosToGridNode,
h=c.options,l=v(d.options&&d.options.labels,h&&h.labels),p=l&&z(l.symbol,!0)?l.symbol:{},n=(g=g&&g[e])&&g.depth;h="treegrid"===h.type;var m=-1<c.tickPositions.indexOf(e);e=c.chart.styledMode;h&&g&&b&&b.element&&b.addClass("highcharts-treegrid-node-level-"+n);f.apply(d,Array.prototype.slice.call(arguments,1));h&&b&&b.element&&g&&g.descendants&&0<g.descendants&&(c=c.treeGrid.isCollapsed(g),a(d,{color:!e&&b.styles&&b.styles.color||"",collapsed:c,group:b.parentGroup,options:p,renderer:b.renderer,show:m,
xy:b.xy}),p="highcharts-treegrid-node-"+(c?"expanded":"collapsed"),b.addClass("highcharts-treegrid-node-"+(c?"collapsed":"expanded")).removeClass(p),e||b.css({cursor:"pointer"}),[b,d.treeGrid.labelIcon].forEach(function(a){a&&!a.attachedTreeGridEvents&&(r(a.element,"mouseover",function(){b.addClass("highcharts-treegrid-node-active");b.renderer.styledMode||b.css({textDecoration:"underline"})}),r(a.element,"mouseout",function(){var a=z(l.style)?l.style:{};b.removeClass("highcharts-treegrid-node-active");
b.renderer.styledMode||b.css({textDecoration:a.textDecoration})}),r(a.element,"click",function(){d.treeGrid.toggleCollapse()}),a.attachedTreeGridEvents=!0)}))}var D=!1;h.compose=function(a){D||(r(a,"init",l),n(a.prototype,"getLabelPosition",g),n(a.prototype,"renderLabel",p),a.prototype.collapse=function(a){this.treeGrid.collapse(a)},a.prototype.expand=function(a){this.treeGrid.expand(a)},a.prototype.toggleCollapse=function(a){this.treeGrid.toggleCollapse(a)},D=!0)};var x=function(){function a(a){this.tick=
a}a.prototype.collapse=function(a){var d=this.tick,c=d.axis,b=c.brokenAxis;b&&c.treeGrid.mapOfPosToGridNode&&(d=c.treeGrid.collapse(c.treeGrid.mapOfPosToGridNode[d.pos]),b.setBreaks(d,v(a,!0)))};a.prototype.destroy=function(){this.labelIcon&&this.labelIcon.destroy()};a.prototype.expand=function(a){var d=this.tick,c=d.axis,b=c.brokenAxis;b&&c.treeGrid.mapOfPosToGridNode&&(d=c.treeGrid.expand(c.treeGrid.mapOfPosToGridNode[d.pos]),b.setBreaks(d,v(a,!0)))};a.prototype.toggleCollapse=function(a){var d=
this.tick,c=d.axis,b=c.brokenAxis;b&&c.treeGrid.mapOfPosToGridNode&&(d=c.treeGrid.toggleCollapse(c.treeGrid.mapOfPosToGridNode[d.pos]),b.setBreaks(d,v(a,!0)))};return a}();h.Additions=x})(l||(l={}));return l});B(h,"Series/TreeUtilities.js",[h["Core/Color/Color.js"],h["Core/Utilities.js"]],function(h,r){function v(a,g){var h=g.before,l=g.idRoot,n=g.mapIdToNode[l],f=g.points[a.i],d=f&&f.options||{},e=[],c=0;a.levelDynamic=a.level-(!1!==g.levelIsConstant?0:n.level);a.name=C(f&&f.name,"");a.visible=l===
a.id||!0===g.visible;"function"===typeof h&&(a=h(a,g));a.children.forEach(function(b,d){var f=q({},g);q(f,{index:d,siblings:a.children.length,visible:a.visible});b=v(b,f);e.push(b);b.visible&&(c+=b.val)});h=C(d.value,c);a.visible=0<=h&&(0<c||a.visible);a.children=e;a.childrenTotal=c;a.isLeaf=a.visible&&!c;a.val=h;return a}var q=r.extend,B=r.isArray,n=r.isNumber,l=r.isObject,x=r.merge,C=r.pick;return{getColor:function(a,g){var l=g.index,n=g.mapOptionsToLevel,r=g.parentColor,f=g.parentColorIndex,d=
g.series,e=g.colors,c=g.siblings,b=d.points,v=d.chart.options.chart,q;if(a){b=b[a.i];a=n[a.level]||{};if(n=b&&a.colorByPoint){var x=b.index%(e?e.length:v.colorCount);var z=e&&e[x]}if(!d.chart.styledMode){e=b&&b.options.color;v=a&&a.color;if(q=r)q=(q=a&&a.colorVariation)&&"brightness"===q.key&&l&&c?h.parse(r).brighten(l/c*q.to).get():r;q=C(e,v,z,q,d.color)}var B=C(b&&b.options.colorIndex,a&&a.colorIndex,x,f,g.colorIndex)}return{color:q,colorIndex:B}},getLevelOptions:function(a){var g=null;if(l(a)){g=
{};var h=n(a.from)?a.from:1;var q=a.levels;var r={};var f=l(a.defaults)?a.defaults:{};B(q)&&(r=q.reduce(function(a,e){if(l(e)&&n(e.level)){var c=x({},e);var b=C(c.levelIsConstant,f.levelIsConstant);delete c.levelIsConstant;delete c.level;e=e.level+(b?0:h-1);l(a[e])?x(!0,a[e],c):a[e]=c}return a},{}));q=n(a.to)?a.to:1;for(a=0;a<=q;a++)g[a]=x({},f,l(r[a])?r[a]:{})}return g},setTreeValues:v,updateRootId:function(a){if(l(a)){var g=l(a.options)?a.options:{};g=C(a.rootNode,g.rootId,"");l(a.userOptions)&&
(a.userOptions.rootId=g);a.rootNode=g}return g}}});B(h,"Core/Axis/TreeGridAxis.js",[h["Core/Axis/BrokenAxis.js"],h["Core/Axis/GridAxis.js"],h["Gantt/Tree.js"],h["Core/Axis/TreeGridTick.js"],h["Series/TreeUtilities.js"],h["Core/Utilities.js"]],function(h,r,z,q,B,n){var l=B.getLevelOptions,v=n.addEvent,C=n.find,a=n.fireEvent,g=n.isArray,p=n.isObject,D=n.isString,K=n.merge,f=n.pick,d=n.wrap,e;(function(c){function b(a,b){var c=a.collapseEnd||0;a=a.collapseStart||0;c>=b&&(a-=.5);return{from:a,to:c,showPoints:!1}}
function e(a,b,c){var d=[],k=[],e={},g="boolean"===typeof b?b:!1,f={},h=-1;a=z.getTree(a,{after:function(a){a=f[a.pos];var b=0,c=0;a.children.forEach(function(a){c+=(a.descendants||0)+1;b=Math.max((a.height||0)+1,b)});a.descendants=c;a.height=b;a.collapsed&&k.push(a)},before:function(a){var b=p(a.data,!0)?a.data:{},c=D(b.name)?b.name:"",k=e[a.parent];k=p(k,!0)?f[k.pos]:null;var l=function(a){return a.name===c},m;g&&p(k,!0)&&(m=C(k.children,l))?(l=m.pos,m.nodes.push(a)):l=h++;f[l]||(f[l]=m={depth:k?
k.depth+1:0,name:c,id:b.id,nodes:[a],children:[],pos:l},-1!==l&&d.push(c),p(k,!0)&&k.children.push(m));D(a.id)&&(e[a.id]=a);m&&!0===b.collapsed&&(m.collapsed=!0);a.pos=l}});f=function(a,b){var c=function(a,d,k){var e=d+(-1===d?0:b-1),g=(e-d)/2,f=d+g;a.nodes.forEach(function(a){var b=a.data;p(b,!0)&&(b.y=d+(b.seriesIndex||0),delete b.seriesIndex);a.pos=f});k[f]=a;a.pos=f;a.tickmarkOffset=g+.5;a.collapseStart=e+.5;a.children.forEach(function(a){c(a,e+1,k);e=(a.collapseEnd||0)-.5});a.collapseEnd=e+.5;
return k};return c(a["-1"],-1,{})}(f,c);return{categories:d,mapOfIdToNode:e,mapOfPosToGridNode:f,collapsedNodes:k,tree:a}}function n(a){a.target.axes.filter(function(a){return"treegrid"===a.options.type}).forEach(function(b){var c=b.options||{},d=c.labels,k=c.uniqueNames;c=c.max;var f=0;if(!b.treeGrid.mapOfPosToGridNode||b.series.some(function(a){return!a.hasRendered||a.isDirtyData||a.isDirty})){var h=b.series.reduce(function(a,b){b.visible&&((b.options.data||[]).forEach(function(c){b.options.keys&&
b.options.keys.length&&(c=b.pointClass.prototype.optionsToObject.call({series:b},c),b.pointClass.setGanttPointAliases(c));p(c,!0)&&(c.seriesIndex=f,a.push(c))}),!0===k&&f++);return a},[]);if(c&&h.length<c)for(var m=h.length;m<=c;m++)h.push({name:m+"\u200b"});c=e(h,k||!1,!0===k?f:1);b.categories=c.categories;b.treeGrid.mapOfPosToGridNode=c.mapOfPosToGridNode;b.hasNames=!0;b.treeGrid.tree=c.tree;b.series.forEach(function(a){var b=(a.options.data||[]).map(function(b){g(b)&&a.options.keys&&a.options.keys.length&&
h.forEach(function(a){0<=b.indexOf(a.x)&&0<=b.indexOf(a.x2)&&(b=a)});return p(b,!0)?K(b):b});a.visible&&a.setData(b,!1)});b.treeGrid.mapOptionsToLevel=l({defaults:d,from:1,levels:d&&d.levels,to:b.treeGrid.tree&&b.treeGrid.tree.height});"beforeRender"===a.type&&(b.treeGrid.collapsedNodes=c.collapsedNodes)}})}function x(a,b){var c=this.treeGrid.mapOptionsToLevel||{},d=this.ticks,e=d[b],k;if("treegrid"===this.options.type&&this.treeGrid.mapOfPosToGridNode){var f=this.treeGrid.mapOfPosToGridNode[b];(c=
c[f.depth])&&(k={labels:c});!e&&m?d[b]=new m(this,b,void 0,void 0,{category:f.name,tickmarkOffset:f.tickmarkOffset,options:k}):(e.parameters.category=f.name,e.options=k,e.addLabel())}else a.apply(this,Array.prototype.slice.call(arguments,1))}function B(a,b,c){var d=this,k="treegrid"===c.type;d.treeGrid||(d.treeGrid=new H(d));k&&(v(b,"beforeRender",n),v(b,"beforeRedraw",n),v(b,"addSeries",function(a){a.options.data&&(a=e(a.options.data,c.uniqueNames||!1,1),d.treeGrid.collapsedNodes=(d.treeGrid.collapsedNodes||
[]).concat(a.collapsedNodes))}),v(d,"foundExtremes",function(){d.treeGrid.collapsedNodes&&d.treeGrid.collapsedNodes.forEach(function(a){var b=d.treeGrid.collapse(a);d.brokenAxis&&(d.brokenAxis.setBreaks(b,!1),d.treeGrid.collapsedNodes&&(d.treeGrid.collapsedNodes=d.treeGrid.collapsedNodes.filter(function(b){return a.collapseStart!==b.collapseStart||a.collapseEnd!==b.collapseEnd})))})}),v(d,"afterBreaks",function(){"yAxis"===d.coll&&!d.staticScale&&d.chart.options.chart.height&&(d.isDirty=!0)}),c=K({grid:{enabled:!0},
labels:{align:"left",levels:[{level:void 0},{level:1,style:{fontWeight:"bold"}}],symbol:{type:"triangle",x:-5,y:-5,height:10,width:10,padding:5}},uniqueNames:!1},c,{reversed:!0,grid:{columns:void 0}}));a.apply(d,[b,c]);k&&(d.hasNames=!0,d.options.showLastLabel=!0)}function G(b){var c=this.options;"treegrid"===c.type?(this.min=f(this.userMin,c.min,this.dataMin),this.max=f(this.userMax,c.max,this.dataMax),a(this,"foundExtremes"),this.setAxisTranslation(),this.tickmarkOffset=.5,this.tickInterval=1,this.tickPositions=
this.treeGrid.mapOfPosToGridNode?this.treeGrid.getTickPositions():[]):b.apply(this,Array.prototype.slice.call(arguments,1))}var m;c.compose=function(a,b,c,e){-1===a.keepProps.indexOf("treeGrid")&&(a.keepProps.push("treeGrid"),m=e,d(a.prototype,"generateTick",x),d(a.prototype,"init",B),d(a.prototype,"setTickInterval",G),a.prototype.utils={getNode:z.getNode},r.compose(a,b,e),h.compose(a,c),q.compose(e));return a};var H=function(){function a(a){this.axis=a}a.prototype.setCollapsedStatus=function(a){var b=
this.axis,c=b.chart;b.series.forEach(function(b){var d=b.options.data;if(a.id&&d){var e=c.get(a.id);b=d[b.data.indexOf(e)];e&&b&&(e.collapsed=a.collapsed,b.collapsed=a.collapsed)}})};a.prototype.collapse=function(a){var c=this.axis,d=c.options.breaks||[],e=b(a,c.max);d.push(e);a.collapsed=!0;c.treeGrid.setCollapsedStatus(a);return d};a.prototype.expand=function(a){var c=this.axis,d=c.options.breaks||[],e=b(a,c.max);a.collapsed=!1;c.treeGrid.setCollapsedStatus(a);return d.reduce(function(a,b){b.to===
e.to&&b.from===e.from||a.push(b);return a},[])};a.prototype.getTickPositions=function(){var a=this.axis,b=Math.floor(a.min/a.tickInterval)*a.tickInterval,c=Math.ceil(a.max/a.tickInterval)*a.tickInterval;return Object.keys(a.treeGrid.mapOfPosToGridNode||{}).reduce(function(d,e){e=+e;!(e>=b&&e<=c)||a.brokenAxis&&a.brokenAxis.isInAnyBreak(e)||d.push(e);return d},[])};a.prototype.isCollapsed=function(a){var c=this.axis,d=c.options.breaks||[],e=b(a,c.max);return d.some(function(a){return a.from===e.from&&
a.to===e.to})};a.prototype.toggleCollapse=function(a){return this.isCollapsed(a)?this.expand(a):this.collapse(a)};return a}();c.Additions=H})(e||(e={}));return e});B(h,"masters/modules/treegrid.src.js",[h["Core/Globals.js"],h["Core/Axis/TreeGridAxis.js"]],function(h,r){r.compose(h.Axis,h.Chart,h.Series,h.Tick)})});
//# sourceMappingURL=treegrid.js.map