0:[[["",{"children":["(main)",{"children":["docs",{"children":[["docs","stock/custom-technical-indicators","c"],{"children":["__PAGE__?{\"docs\":[\"stock\",\"custom-technical-indicators\"]}",{}]}]}]},"$undefined","$undefined",true]}],"$L1",[[],["$L2",null]]]]
3:HL["/_next/static/css/b2e0b431b62130d6.css",{"as":"style"}]
4:HL["/_next/static/css/888b42a6ac67b744.css",{"as":"style"}]
5:I{"id":"9631","chunks":["272:static/chunks/webpack-0d6f19481046fd3b.js","509:static/chunks/54cd117c-0de4f9b009705f45.js","111:static/chunks/111-7e9f7f1a63948fbf.js"],"name":"","async":false}
6:I{"id":"2781","chunks":["272:static/chunks/webpack-0d6f19481046fd3b.js","509:static/chunks/54cd117c-0de4f9b009705f45.js","111:static/chunks/111-7e9f7f1a63948fbf.js"],"name":"","async":false}
7:I{"id":"8801","chunks":["3:static/chunks/3-1f903c812f794e06.js","572:static/chunks/572-dd6907329ad47b59.js","801:static/chunks/801-8b17748d0b5c88f7.js","191:static/chunks/app/(shop)/layout-630ea7c8823d9902.js"],"name":"","async":false}
9:I{"id":"7028","chunks":["3:static/chunks/3-1f903c812f794e06.js","572:static/chunks/572-dd6907329ad47b59.js","801:static/chunks/801-8b17748d0b5c88f7.js","191:static/chunks/app/(shop)/layout-630ea7c8823d9902.js"],"name":"","async":false}
1:["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L6",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":[["$","html",null,{"lang":"en","children":[null,["$","body",null,{"children":[["$","$L7",null,{}],["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","(main)","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L6",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","(main)","children","docs","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L6",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$","$L5",null,{"parallelRouterKey":"children","segmentPath":["children","(main)","children","docs","children",["docs","stock/custom-technical-indicators","c"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L6",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":false,"childProp":{"current":["$L8",null],"segment":"__PAGE__?{\"docs\":[\"stock\",\"custom-technical-indicators\"]}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/888b42a6ac67b744.css","precedence":"next"}]]}],"segment":["docs","stock/custom-technical-indicators","c"]},"styles":[]}],"segment":"docs"},"styles":[]}],["$","footer",null,{"className":"page-footer font-small bkgDarkestGray","role":"contentinfo","children":["$","div",null,{"id":"footer","className":"container","children":[["$","div",null,{"className":"row footer-menu","children":[["$","div",null,{"className":"col-6 col-md-4 col-lg mt-2 mb-2","children":[["$","h2",null,{"className":"h4 mb-1 mb-md-2 footer-heading font-weight-light","children":"快捷链接"}],["$","ul",null,{"className":"footer-list list-unstyled","children":[["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"/product","children":"产品"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"/demos","children":"例子"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"/download","children":"下载试用"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"https://shop.highsoft.com","target":"_blank","children":"获取授权"}]}]]}]]}],["$","div",null,{"className":"col-6 col-md-4 col-lg mt-2 mb-2","children":[["$","h2",null,{"className":"h4 mb-1 mb-md-2 footer-heading font-weight-light","children":"开发者资源"}],["$","ul",null,{"className":"footer-list list-unstyled","children":[["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"/docs","children":"使用文档"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"https://api.highcharts.com","target":"_blank","children":"API 文档"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"/changelog","children":"更新日志"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"/roadmap","children":"发展规划"}]}]]}]]}],["$","div",null,{"className":"col-6 col-md-4 col-lg mt-2 mb-2","children":[["$","h2",null,{"className":"h4 mb-1 mb-md-2 footer-heading font-weight-light","children":"服务与支持"}],["$","ul",null,{"className":"footer-list list-unstyled","children":[["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"https://www.highcharts.com/forum/","target":"_blank","children":"技术社区"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"https://stackoverflow.com/tags/highcharts","target":"_blank","children":"Stack Overflow"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"https://github.com/highcharts/highcharts","target":"_blank","children":"Github"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"/support","children":"服务与支持"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"/chart-chooser","children":"图表选择器"}]}]]}]]}],["$","div",null,{"className":"col-6 col-md-4 col-lg mt-2 mb-2","children":[["$","h2",null,{"className":"h4 mb-1 mb-md-2 footer-heading font-weight-light","children":"网站相关"}],["$","ul",null,{"className":"footer-list list-unstyled","children":[["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"http://localhost:3000/privacy","target":"_blank","children":"隐私政策"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"https://shop.highcharts.com/license","target":"_blank","children":"标准协议文档"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"/sitemap.xml","children":"Sitemap"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"https://www.highcharts.com/blog/article/accessibility-statement/","target":"_blank","children":"Accessibility Statement"}]}]]}]]}],["$","div",null,{"className":"col-6 col-md-4 col-lg mt-2 mb-2","children":[["$","h2",null,{"className":"h4 mb-1 mb-md-2 footer-heading font-weight-light","children":"关于"}],["$","ul",null,{"className":"footer-list list-unstyled","children":[["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"/about","children":"我们的故事"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"hhttps://www.highcharts.com/people","children":"团队"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"/about/contact","children":"联系方式"}]}],["$","li",null,{"className":"footer-link","children":["$","$L9",null,{"href":"https://wp-assets.highcharts.com/www-highcharts-com/blog/wp-content/uploads/2021/08/16115648/Codeofconduct.pdf","target":"_blank","children":"行为准则"}]}]]}]]}]]}],["$","div",null,{"className":"row pb30 desktop-version","children":[["$","div",null,{"className":"col py-1 pr-0 pb-3 text-left highchartsRights small-text","children":["$","div",null,{"children":[" © ",2023," Highcharts",["$","span",null,{"className":"sep","children":" 保留所有权利，"}],["$","a",null,{"href":"https://beian.miit.gov.cn/","target":"_blank","children":"浙ICP备16004892号-1"}],"，由 ",["$","a",null,{"href":"/about/parter","children":"简数科技"}]," 提供服务。"]}]}],["$","div",null,{"className":"col py-1 pl-0 pb-3 text-right","children":[["$","h2",null,{"className":"h2-text-hidden","children":"Social"}],["$","ul",null,{"className":"footerSocialsList footerSocials","children":[["$","li",null,{"children":["$","a",null,{"className":"socials","href":"https://github.com/highcharts/highcharts","aria-label":"Highcharts Github","children":["$","i",null,{"className":"fa fa-github txtWhite","aria-hidden":"true"}]}]}],["$","li",null,{"children":["$","a",null,{"className":"socials","href":"https://stackoverflow.com/questions/tagged/highcharts","aria-label":"Highcharts Stack Overflow","children":["$","i",null,{"className":"fa fa-stack-overflow txtWhite","aria-hidden":"true"}]}]}]]}]]}]]}]]}]}],["$","script",null,{"src":"/js/common.js"}]]}]]}],null],"segment":"(main)"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/b2e0b431b62130d6.css","precedence":"next"}]]}]
2:[[["$","meta",null,{"charSet":"utf-8"}],["$","title",null,{"children":"Custom technical indicators | Highcharts"}],null,null,null,null,null,null,null,null,null,["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,null]
a:I{"id":"3982","chunks":["572:static/chunks/572-dd6907329ad47b59.js","906:static/chunks/app/(main)/docs/[...docs]/page-3ec5851d73f57d7b.js"],"name":"","async":false}
8:["$","section",null,{"className":"docs main","children":[["$","aside",null,{"className":"sidebar","children":["$","$La",null,{"data":[{"name":"快速上手","children":[{"code":"system-requirements","name":"运行环境及兼容性"},{"code":"your-first-chart","name":"1 分钟快速上手"},{"code":"installation","name":"安装与使用"},{"code":"installation-with-esm","name":"使用 ES6 模块安装"},{"code":"install-from-npm","name":"使用 NPM 安装"},{"code":"install-from-bower","name":"使用 Bower 安装"},{"code":"how-to-set-options","name":"如何设置图表配置"},{"code":"frequently-asked-questions","name":"常见问题"},{"code":"how-to-create-custom-highcharts-packages","name":"创建自定义的 Highcharts 文件"},{"code":"optional-dependencies","name":"可选的依赖项","category":"getting-started"}],"code":"getting-started"},{"name":"图表基本概念","children":[{"code":"understanding-highcharts","name":"图表主要组成及基本概念","category":"chart-concepts"},{"code":"title-and-subtitle","name":"标题"},{"code":"axes","name":"坐标轴"},{"code":"series","name":"数据列"},{"code":"tooltip","name":"数据提示框"},{"code":"legend","name":"图例"},{"code":"bubble-legend","name":"Bubble legend"},{"code":"scrollbar","name":"滚动条"},{"code":"plot-bands-and-plot-lines","name":"标识区及标示线"},{"code":"zooming","name":"缩放"},{"code":"labels-and-string-formatting","name":"标签及字符串格式化"},{"code":"drilldown","name":"钻取"},{"code":"3d-charts","name":"3D 图"},{"code":"responsive","name":"响应式图表"},{"code":"security","name":"安全配置","category":"chart-concepts"}],"code":"chart-concepts"},{"name":"Highcharts Stock","children":[{"code":"understanding-highcharts-stock","name":"Understanding Highcharts Stock","category":"stock"},{"code":"stock-tools","name":"Stock tools"},{"code":"candlestick-chart","name":"Candlestick chart"},{"code":"compare","name":"Compare"},{"code":"cumulative-sum","name":"Cumulative Sum"},{"code":"hollow-candlestick-chart","name":"Hollow Candlestick chart"},{"code":"heikinashi","name":"Heikin Ashi chart"},{"code":"data-grouping","name":"Data grouping"},{"code":"depth-chart","name":"Depth Chart"},{"code":"flag-series","name":"Flag series"},{"code":"navigator","name":"Navigator"},{"code":"hlc-chart","name":"HLC chart"},{"code":"ohlc-chart","name":"OHLC chart"},{"code":"range-selector","name":"Range selector"},{"code":"axis-resizer","name":"Axis resizer"},{"code":"technical-indicator-series","name":"Technical indicators"},{"code":"custom-technical-indicators","name":"Custom technical indicators"}],"code":"stock"},{"name":"地图（Highcharts Maps）","children":[{"code":"getting-started","name":"Getting started with Highcharts Maps","category":"maps"},{"code":"map-navigation","name":"Map navigation"},{"code":"color-axis","name":"Color axis"},{"code":"map-collection","name":"Map collection"},{"code":"create-custom-maps","name":"Creating custom maps"},{"code":"custom-geojson-maps","name":"Custom GeoJSON maps"},{"code":"adding-points-and-lines","name":"Adding points and lines"},{"code":"latlon","name":"Latitude/longitude"},{"code":"map-series","name":"Map series"},{"code":"tilemap-series","name":"Tilemaps"}],"code":"maps"},{"name":"甘特图（Highcharts Gantt）","children":[{"code":"getting-started-gantt","name":"Getting started with Gantt"},{"code":"gantt-grouping-tasks","name":"Grouping tasks in a hierarchy"},{"code":"gantt-task-dependencies","name":"Dependencies between tasks"},{"code":"gantt-axis-grid","name":"Gantt axis grid"},{"code":"gantt-task-config","name":"Gantt task configuration"}],"code":"gantt"},{"name":"图表类型","children":[{"code":"chart-types","name":"Chart types"},{"code":"combining-chart-types","name":"Combining chart types"},{"code":"3d-cylinder","name":"3D cylinder"},{"code":"funnel-3d","name":"3D funnel"},{"code":"pyramid-3d","name":"3D pyramid"},{"code":"angular-gauges","name":"Angular gauges"},{"code":"area-chart","name":"Area chart"},{"code":"areaspline-chart","name":"Areaspline chart"},{"code":"bar-chart","name":"Bar chart"},{"code":"bell-curve-series","name":"Bell curve"},{"code":"box-plot-series","name":"Box plot series"},{"code":"bullet-chart","name":"Bullet chart"},{"code":"column-chart","name":"Column chart"},{"code":"column-pyramid","name":"Column pyramid"},{"code":"dependency-wheel","name":"Dependency wheel"},{"code":"dumbbell-series","name":"Dumbbell chart"},{"code":"error-bar-series","name":"Error bar series"},{"code":"funnel-series","name":"Funnel series"},{"code":"heatmap","name":"Heatmap"},{"code":"histogram-series","name":"Histogram"},{"code":"item-chart","name":"Item chart"},{"code":"line-chart","name":"Line chart"},{"code":"lollipop-series","name":"Lollipop chart"},{"code":"network-graph","name":"Network graph"},{"code":"organization-chart","name":"Organization chart"},{"code":"packed-bubble","name":"Packed bubble"},{"code":"parallel-coordinates-chart","name":"Parallel coordinates"},{"code":"pareto-chart","name":"Pareto chart"},{"code":"pie-chart","name":"Pie chart"},{"code":"polar-chart","name":"Polar (Radar) chart"},{"code":"radial-bar-chart","name":"Radial (or Circular) bar chart"},{"code":"range-series","name":"Range series"},{"code":"sankey-diagram","name":"Sankey diagram"},{"code":"scatter-chart","name":"Scatter chart"},{"code":"spline-chart","name":"Spline chart"},{"code":"stream-graph","name":"Stream graph"},{"code":"sunburst-series","name":"Sunburst"},{"code":"timeline-series","name":"Timeline chart"},{"code":"treemap","name":"Treemap"},{"code":"variable-radius-pie-chart","name":"Variable radius pie"},{"code":"variwide-chart","name":"Variwide chart"},{"code":"vector-plot","name":"Vector plot"},{"code":"venn-series","name":"Venn series"},{"code":"waterfall-series","name":"Waterfall series"},{"code":"wind-barbs-series","name":"Wind barbs"},{"code":"word-cloud-series","name":"Word cloud"},{"code":"x-range-series","name":"X-range series"}],"code":"chart-and-series-types"},{"name":"高级功能及特性","children":[{"code":"annotations-module","name":"Annotations module"},{"code":"annotations-and-fibonacci-retracements","name":"Annotations and fibonacci retracements"},{"code":"boost-module","name":"Boost module"},{"code":"data-sorting","name":"Data sorting"},{"code":"marker-clusters","name":"Marker clusters"},{"code":"debugger-mode","name":"Debugger module"},{"code":"freeform-drawing","name":"Freeform drawing"},{"code":"internationalization","name":"Internationalization"},{"code":"pie-datalabels-alignment","name":"Pie dataLabels alignment"},{"code":"stacking-charts","name":"Stacking charts"},{"code":"highcharts-typescript-declarations","name":"Highcharts TypeScript Declarations (beta)"}],"code":"advanced-chart-features"},{"name":"图表导出功能","children":[{"code":"export-module-overview","name":"Export module"},{"code":"client-side-export","name":"Client side export"},{"code":"setting-up-the-server","name":"Setting up your own export server"},{"code":"render-charts-serverside","name":"Command Line Rendering"},{"code":"privacy-disclaimer-export","name":"Export server Terms of Use "}],"code":"export-module"},{"name":"数据处理","children":[{"code":"data-intro","name":"Working with data"},{"code":"data-compression","name":"Data compression"},{"code":"data-module","name":"Data module"},{"code":"custom-preprocessing","name":"Custom Preprocessing"},{"code":"live-data","name":"Live data"},{"code":"data-from-a-database","name":"Data from a database"},{"code":"getting-data-across-domains-jsonp","name":"Cross domain data"},{"code":"server-side-data-grouping","name":"Server-side data grouping"}],"code":"working-with-data"},{"name":"图表设计及样式","children":[{"code":"design-and-style","name":"Design and style"},{"code":"colors","name":"Colors"},{"code":"pattern-fills","name":"Pattern fills"},{"code":"themes","name":"Themes"},{"code":"style-by-css","name":"Style by CSS"},{"code":"custom-themes-in-styled-mode","name":"Custom themes in styled mode"},{"code":"gradients-shadows-and-patterns","name":"Gradients, shadows, and pattern fills in styled mode"}],"code":"chart-design-and-style"},{"name":"无障碍访问","children":[{"code":"accessibility-module","name":"Accessibility module"},{"code":"accessibility-module-feature-overview","name":"Accessibility module feature overview"},{"code":"configure-the-accessibility-module","name":"Advanced accessibility configuration"},{"code":"accessible-dynamic-data","name":"Accessible dynamic data"},{"code":"sonification","name":"Sonification"},{"code":"patterns-and-contrast","name":"Patterns and contrast"},{"code":"tables","name":"Tables"},{"code":"compliance","name":"Accessibility compliance"}],"code":"accessibility"},{"name":"扩展","children":[{"code":"extending-highcharts","name":"Extending Highcharts"}],"code":"extending-highcharts"}],"current":{"parent":"stock","code":"custom-technical-indicators"},"options":{"className":" white-theme","name":"name","key":"code","freeToggle":true,"linkPatter":"/docs/${category}/${code}"}}]}],["$","div",null,{"className":"docs-content","children":["$","div",null,{"className":"container","children":["$","div",null,{"className":"row","children":[["$","div",null,{"className":"col-lg-9","children":[["$","div",null,{"className":"doc","dangerouslySetInnerHTML":{"__html":"<h1>Custom technical indicators</h1>\n<p>This article shows how to create custom technical indicators, in this case, linear regression. To read more about technical indicators offered by Highcharts click <a href=\"https://www.highcharts.com/docs/stock/technical-indicator-series\" target=\"_blank\">here</a>.</p>\n<p>Be sure to have at least the <a href=\"https://www.highcharts.com/blog/news/announcing-highcharts-6/\" target=\"_blank\">Highcharts version 6</a>, as previous Highcharts versions don’t support technical indicators.</p>\n<h2>TECHNICAL INDICATOR SERIES</h2>\n<p>There are two main steps to create a technical indicator series:</p>\n<ol>\n<li>Set up the technical indicator structure.</li>\n<li>Create the technical indicator functionality.</li>\n</ol>\n<h3>1. Set up the structure</h3>\n<p>Each technical indicator requires the method <code>getValues()</code> to be implemented. This method takes two arguments and returns an object. The arguments are the main series and the parameters. The parameters are specific to a technical indicator. Check the structure of the method <code>getValues()</code>:</p>\n<pre><code>  function getValues(series, params) {\n    // calculations\n    ...\n    // end of calculations\n    return {\n      xData: [...], // array of x-values\n      yData: [...] // array of y-values\n      values: [...], // array of points\n    };\n  }\n</code></pre>\n<p>All technical indicators are series types, and to create a new series, in Highcharts, the following method <a href=\"https://api.highcharts.com/class-reference/Highcharts.html#seriesType\" target=\"_blank\">Highcharts.seriesType()</a> is used.</p>\n<pre><code>&#x3C;script type=\"text/javascript\" src=\"https://code.highcharts.com/stock/indicators/indicators.js\">&#x3C;/script>\n\nHighcharts.seriesType(\n  'linearregression',\n  'sma',\n  {\n    name: 'Linear Regression',\n    params: {} // linear regression doesn’t need params\n  },\n  {\n    getValues: function (series, params) {\n      return this.getLinearRegression(series.xData, series.yData);\n    },\n    getLinearRegression: getLinearRegression\n  }\n);\n</code></pre>\n<p>The method <code>getLinearRegression()</code> includes the technical indicator functionality (mathematical calculation). Notice that the indicators module <code>indicators.js</code> is included when creating technical indicators, as it includes the core-logic for all indicators.</p>\n<p>Now the structure is set, the next step is to create the main indicator functionality.</p>\n<h3>2. Technical indicator functionality</h3>\n<p>The technical indicator functionality is represented by the following method <code>getLinearRegression()</code>, that calculates the regression points according to xData and yData.</p>\n<p>Here is a simple mathematical representation of the linear regression:</p>\n<p><img src=\"https://lh6.googleusercontent.com/8NvDcqjObGTJGu-fuCMAcfWFK8OwOsOO65LmuJobonUW0sueqSeW4whnWOLWmHrC4tqvgpvfzNgSrurM6cSFOuvE7anlKHPEI1xoz9uHh2BRTVEv1woPHaL9Xqv0VAhXoCxBLZdI\" alt=\"Screen Shot 2017-11-03 at 14.11.43.png\"></p>\n<p>Where the slope is: </p>\n<p><img src=\"https://lh4.googleusercontent.com/Owfqf0RgAgMeOQIsjt6oGyhUpEVC2U0tJq1oyc-J8Ney01UN-WLutwXxGbEpClkGBQNLaZ2FHtm4oSegZmg5clvlsBl9LiAWAVPpgb8oWoE06s7h8SO8LYU6seepsdkyxCFhq8AU\" alt=\"Screen Shot 2017-11-03 at 14.11.51.png\"></p>\n<p>And offset:</p>\n<p><img src=\"https://lh3.googleusercontent.com/oACfBFWV5gm7yPq6kUoPGJkPbdntUnjOVqRON491vVA77WbvS294c8kTEshlzPbu7Yoo1zoUeqP5afr2WfxBUhgUIwFO2uojZWlGlFy1nQBa2KjF7HfF_cPEHTRjUS9U1lyyUZ0g\" alt=\"Screen Shot 2017-11-03 at 14.12.06.png\"></p>\n<p>The JavaScript representation of the formulas above is as follows:</p>\n<pre><code>function getLinearRegression(xData, yData) {\n  var sumX = 0,\n      sumY = 0,\n      sumXY = 0,\n      sumX2 = 0,\n      linearData = [],\n      linearXData = [],\n      linearYData = [],\n      n = xData.length,\n      alpha, beta, i, x, y;\n\n  // Get sums:\n  for (i = 0; i &#x3C; n; i++) {\n    x = xData[i];\n    y = yData[i];\n    sumX += x;\n    sumY += y;\n    sumXY += x * y;\n    sumX2 += x * x;\n  }\n\n  // Get slope and offset:\n  alpha = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);\n  if (isNaN(alpha)) {\n    alpha = 0;\n  }\n  beta = (sumY - alpha * sumX)/ n;\n\n  // Calculate linear regression:\n  for (i = 0; i &#x3C; n; i++) {\n    x = xData[i];\n    y = alpha * x + beta;\n\n    // Prepare arrays required for getValues() method\n    linearData[i] = [x, y];\n    linearXData[i] = x;\n    linearYData[i] = y;\n  }\n\n  return {\n    xData: linearXData,\n    yData: linearYData,\n    values: linearData\n  };\n}\n</code></pre>\n<p>Notice that Linear regression series in this example is still a line series, and that means data has to be sorted ascending by x-values.</p>\n<p>That’s it; the technical indicator is ready to be used. Keep in mind that the technical indicator is connected to the main series by the <a href=\"https://api.highcharts.com/highstock/plotOptions.sma.linkedTo\" target=\"_blank\">linkedTo</a> option:</p>\n<pre><code>series: [{\n  id: 'main',\n  type: 'scatter',\n  data: [ ... ]\n}, {\n  type: 'linearregression',\n  linkedTo: 'main'\n}]\n</code></pre>\n<p>For live demos check the links below:</p>\n<ul>\n<li><a href=\"https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/stock/indicators/custom-regression-scatter/\" target=\"_blank\">Scatter Height vs Weight</a></li>\n<li><a href=\"https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/stock/indicators/custom-regression-aapl/\" target=\"_blank\">AAPL Stock Price</a></li>\n<li><a href=\"https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/stock/indicators/custom-regression-column/\" target=\"_blank\">Average Monthly Temperature and Rainfall in Tokyo</a></li>\n</ul>\n<p><strong>Remark</strong></p>\n<p>To improve the user experience when using the linear regression series, try to disable tooltip and/or markers. Go to the <code>seriesType()</code> and set the default options as follows:</p>\n<pre><code>Highcharts.seriesType(\n  'linearregression',\n  'sma',\n  {\n    name: 'Linear Regression',\n    enableMouseTracking: false, // default options\n    marker: {\n      enabled: false\n    }\n    params: {} // linear regression doesn’t need params\n  },\n  {\n    getValues: ... ,\n    getLinearRegression: ...\n  }\n);\n</code></pre>\n<p><strong>Module</strong>\nThe indicator is available as a <a href=\"http://code.highcharts.com/stock/indicators/trendline.js\" target=\"_blank\">indicators/trendline.js</a> main module.</p>\n<h3>3. Indicator with multiple lines</h3>\n<p>Highcharts Stock offers many already implemented ready-to-use indicators. Some of them are drawn using multiple lines (e.g. Bollinger Bands). In this section, you will learn how to build a custom indicator consisting of 5 lines.</p>\n<p>Let's assume we would like to build an indicator with a linear regression main line from the previous example, but this time with the four additional range lines that help to visualize the difference between the main series line and our regression line. For that, we'll add 4 additional lines that will be treated as zones. Those lines' values will be multiplied accordingly by 90%, 95%, 105%, and 110% of the regression line values (step ratio would be possible to change in <code>series.params</code>).</p>\n<p>Of course, the data from the previous example has to be modified:</p>\n<pre><code>// ...\n\nvar zoneDistance = this.options.params.zoneDistance / 100;\n\n// ...\n\n// Calculate linear regression:\nfor (i = 0; i &#x3C; n; i++) {\n  x = xData[i];\n  y = alpha * x + beta;\n\n  // Prepare arrays required for getValues() method\n  linearData[i] = [x, y * (1 - 2 * zoneDistance), y * (1 - zoneDistance), y, y * (1 + zoneDistance), y * (1 + 2 * zoneDistance)];\n  linearXData[i] = x;\n  linearYData[i] = [y * (1 - 2 * zoneDistance), y * (1 - zoneDistance), y, y * (1 + zoneDistance), y * (1 + 2 * zoneDistance)];\n}\n\nreturn {\n  xData: linearXData,\n  yData: linearYData,\n  values: linearData\n};\n</code></pre>\n<p>To draw an indicator with multiple lines, we can use the Highcharts MultipleLines mixin that can be accessed after we add any of the Highcharts indicators implementing multiple lines, e.g. Bollinger Bands:</p>\n<pre><code>&#x3C;script type=\"text/javascript\" src=\"https://code.highcharts.com/stock/indicators/bollinger-bands.js\">&#x3C;/script>\n</code></pre>\n<p>Now, when having access to the MultipleLines mixin, we can prepare Highcharts to draw multiple lines by overwriting the default series prototype methods. We can also name each additional line and define its own styles. Inside the <code>Highcharts.seriesType</code> method we can define the following properties (* - required):</p>\n<ul>\n<li><code>params</code>* - indicator's parameters. In our case, we set the default difference between the lines to <code>5%</code>. This can be changed in the indicator's series options.</li>\n<li><code>closeRangeBottomLine</code><em>, <code>highRangeBottomLine</code></em>, <code>closeRangeTopLine</code><em>, <code>highRangeTopLine</code></em> - separate default styles for each additional line. This can be changed in the indicator's series options.</li>\n<li><code>linesApiNames</code>* - an array containing the names of the additional lines.</li>\n<li><code>nameBase</code> - the name of the indicator displayed in the legend.</li>\n<li><code>nameComponents</code> - an array containing the names of the properties that values should be displayed in parenthesis in the legend next to the indicator's name.</li>\n<li><code>pointArrayMap</code>* - an array containing the keys of the points' values.</li>\n<li><code>pointValKey</code>* - default value for <a href=\"https://api.highcharts.com/highstock/series.ohlc.pointValKey\" target=\"_blank\">pointValKey</a></li>\n<li><code>drawGraph</code><em>, <code>getTranslatedLinesNames</code></em>, <code>translate</code><em>, <code>toYData</code></em> - overwrite the Highcharts core methods responsible for drawing multiple lines.</li>\n</ul>\n<p>Here is how the seriesType method's arguments should look like:</p>\n<pre><code>var multipleLinesMixin = Highcharts._modules['Mixins/MultipleLines.js'];\n\nHighcharts.seriesType(\n  'linearregressionzones',\n  'sma',\n  {\n    color: '#00ff00',\n    params: {\n      zoneDistance: 5\n    },\n    tooltip: {\n      pointFormat: '&#x3C;span style=\"color:{point.color}\">\\u25CF&#x3C;/span> {series.name}:&#x3C;br/>' +\n        '110%: &#x3C;b>{point.y4}&#x3C;/b>&#x3C;br/>' +\n        '105%: &#x3C;b>{point.y3}&#x3C;/b>&#x3C;br/>' +\n        '100%: &#x3C;b>{point.y}&#x3C;/b>&#x3C;br/>' +\n        '95%: &#x3C;b>{point.y2}&#x3C;/b>&#x3C;br/>' +\n        '90%: &#x3C;b>{point.y1}&#x3C;/b>'\n    },\n    closeRangeBottomLine: {\n      styles: {\n        lineWidth: 1,\n        lineColor: '#ffa500'\n      }\n    },\n    highRangeBottomLine: {\n      styles: {\n        lineWidth: 1,\n        lineColor: '#ff0000'\n      }\n    },\n    closeRangeTopLine: {\n      styles: {\n        lineWidth: 1,\n        lineColor: '#ffa500'\n      }\n    },\n    highRangeTopLine: {\n      styles: {\n        lineWidth: 1,\n        lineColor: '#ff0000'\n      }\n    }\n  },\n  {\n    getValues: function (series) {\n        return this.getLinearRegressionZones(series.xData, series.yData);\n    },\n    getLinearRegressionZones: getLinearRegressionZones,\n\n    linesApiNames: ['highRangeBottomLine', 'closeRangeBottomLine', 'closeRangeTopLine', 'highRangeTopLine'],\n    nameBase: 'Linear regression zones',\n    nameComponents: ['zoneDistance'],\n    nameSuffixes: ['%'],\n    parallelArrays: ['x', 'y', 'y1', 'y2', 'y3', 'y4'],\n    pointArrayMap: ['y1', 'y2', 'y', 'y3', 'y4'],\n    pointValKey: 'y'\n  }\n);\n\nvar multipleLinesMixin = Highcharts._modules['Mixins/MultipleLines.js'];\n\nif (multipleLinesMixin) {\n  Highcharts.extend(\n    Highcharts.seriesTypes.linearregressionzones.prototype,\n    {\n      drawGraph: multipleLinesMixin.drawGraph,\n      getTranslatedLinesNames: multipleLinesMixin.getTranslatedLinesNames,\n      translate: multipleLinesMixin.translate,\n      toYData: multipleLinesMixin.toYData\n    }\n  );\n} else { // Highcharts v9.2.3+\n  Highcharts._modules['Stock/Indicators/MultipleLinesComposition.js'].compose(\n    Highcharts.seriesTypes.linearregressionzones\n  );\n}\n</code></pre>\n<p>A live demo of the above multiline indicator can be found <a href=\"https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/stock/indicators/custom-regression-multiple-lines/\" target=\"_blank\">here</a>.</p>\n<p><em>For more detailed samples and documentation check the <a href=\"https://api.highcharts.com/highstock/series.trendline\" target=\"_blank\">API</a>.</em></p>\n<h3>4. Indicators calculated on events.</h3>\n<p>The idea behind creating a custom indicator that is calculated after some chart event (for example <code>afterSetExtremes</code>) is similar to the ones previously mentioned with a few additions.</p>\n<p>The most important object to add while creating the indicators is <code>calculateOn</code> where inside are specified two properties:</p>\n<ul>\n<li><code>chart</code> - on which chart's event the indicator should be calculated, mainly you can choose from <code>init</code> (before the linked series is processed) and <code>render</code> (after processing the linked series).</li>\n<li><code>xAxis</code> - on which xAxis' event the indicator should be recalculated (e.g. <code>afterSetExtremes</code>),</li>\n</ul>\n<p>Example configuration should look like:</p>\n<pre><code>Highcharts.seriesType('customIndicator', 'sma', {}, {\n    getValues: function (series) {\n        return this.getSum(\n            series.processedXData || series.xData,\n            series.processedYData || series.yData\n        );\n    },\n    calculateOn: {\n        chart: 'init',\n        xAxis: 'afterSetExtremes'\n    },\n    getSum: getSum\n});\n</code></pre>\n<p>A live demo of the example above can be found <a href=\"https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/stock/indicators/custom-indicator-on-event/\" target=\"_blank\">here</a>.</p>\n<h3>5. Custom column indicator.</h3>\n<p>The principle of creating a custom column indicator is similar to the ordinary one.\nStill, the <code>getValues</code> method for calculating points position is required.\nAlong with that, in order to render the column, some other methods like <code>crispCol</code>, <code>drawPoints</code>, <code>getColumnMetrics</code>, <code>translate</code>\nneed to be inherited from the column series prototype and the <code>markerAttribs</code>, <code>drawGraph</code> need to be overwritten with an empty function as shown in the code snippet below.</p>\n<p>Additionally, to correctly render that indicator, the <code>threshold</code>, <code>groupPadding</code> and <code>pointPadding</code>\nproperties need to be defined.</p>\n<p>Example configuration should look like:</p>\n<pre><code>Highcharts.seriesType(\n    'customIndicator',\n    'sma', {\n        name: 'Sum of previous 2 points',\n        threshold: 0,\n        groupPadding: 0.2,\n        pointPadding: 0.2\n    }, {\n        getValues: function(series) {\n            return this.getSum(series.xData, series.yData);\n        },\n        getSum: getSum,\n        markerAttribs: Highcharts.noop,\n        drawGraph: Highcharts.noop,\n        crispCol: Highcharts.seriesTypes.column.prototype.crispCol,\n        drawPoints: Highcharts.seriesTypes.column.prototype.drawPoints,\n        getColumnMetrics: Highcharts.seriesTypes.column.prototype.getColumnMetrics,\n        translate: Highcharts.seriesTypes.column.prototype.translate\n    }\n);\n</code></pre>\n<p>A live demo of the example above can be found <a href=\"https://jsfiddle.net/gh/get/library/pure/highcharts/highcharts/tree/master/samples/stock/indicators/custom-column-indicator/\" target=\"_blank\">here</a>.</p>\n"}}],["$","div",null,{"className":"doc-nav","children":[["$","div",null,{"children":["$","a",null,{"href":"technical-indicator-series","children":[["$","span",null,{"children":["上一篇",["$","br",null,{}]]}],["$","h5",null,{"children":"Technical indicators"}]]}]}],["$","div",null,{"className":"doc-nav-next","children":["$","a",null,{"href":"/docs/maps/getting-started","children":[["$","span",null,{"children":["下一篇",["$","br",null,{}]]}],["$","h5",null,{"children":"Getting started with Highcharts Maps"}]]}]}]]}]]}],["$","div",null,{"className":"col-lg-3","children":"$undefined"}]]}]}]}]]}]
